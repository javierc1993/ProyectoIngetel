<style>
    th,
    td {
        text-align: center !important;
    }
    
    .example-section {
        display: flex;
        align-content: center;
        align-items: center;
        height: 60px;
    }
    
    .example-margin {
        margin: 0 10px;
    }
    
    .example-headers-align .mat-expansion-panel-header-description {
        justify-content: space-between;
        align-items: center;
    }
    
    .example-headers-align .mat-form-field+.mat-form-field {
        margin-left: 8px;
    }
</style>


<div class="relative w-full flex overflow-hidden border mt-8 min-h-80 ">

    <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
        <button class="m-5" mat-flat-button [color]="'primary'" (click)="toggleDrawerOpen();">
        <mat-icon>filter_list</mat-icon>
            Filtros
        </button>
        <mat-form-field class="p-4" appearance="standard">
            <mat-label class="text-2xl">Buscar</mat-label>
            <input matInput (keyup)="applyFilter($event)" #input>
        </mat-form-field>
        <div class="overflow-x-auto mx-6">


            <table class="w-full bg-transparent" mat-table [dataSource]="recentTransactionsDataSource" matSort>

                <!-- Transaction ID -->
                <ng-container matColumnDef="SMP">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>SMP</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">{{transaction.smpId}}</span>
                    </td>
                </ng-container>

                <!-- Date 
                    <ng-container matColumnDef="date">
                        <th
                            mat-header-cell
                            mat-sort-header
                            *matHeaderCellDef>
                            Date
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let transaction">
                            <span class="pr-6 whitespace-nowrap">
                                {{transaction.date | date:'MMM dd, y'}}
                            </span>
                        </td>
                    </ng-container>-->

                <!-- nombreSitio -->
                <ng-container matColumnDef="SITE Name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Sitio</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="pr-6 whitespace-nowrap">{{transaction.nombreSitio}}</span>
                    </td>
                </ng-container>

                <!-- poId -->
                <ng-container matColumnDef="PO">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>PO</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="pr-6 font-medium whitespace-nowrap">{{transaction.poId}}</span>
                    </td>
                </ng-container>

                <!-- Escenario -->
                <ng-container matColumnDef="Escenario">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Escenario</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="pr-6 font-medium whitespace-nowrap">{{transaction.escenario}}</span>
                    </td>
                </ng-container>

                <!-- valorPo -->
                <ng-container matColumnDef="Valor PO">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Valor PO</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="leading-relaxed whitespace-nowrap">{{transaction.valorPo}}</span>
                    </td>
                </ng-container>

                <!-- instalacion 
                <ng-container matColumnDef="Instalacion">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>
                        Instalacion
                    </th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase" [ngClass]="{'bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50': transaction.instalacion !== 'pendiente',
                          'bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50 ': transaction.instalacion ==='pendiente'}">
                          <span class="leading-relaxed whitespace-nowrap">{{transaction.instalacion}}</span>
                        </span>
                    </td>
                </ng-container>-->

                <!-- porcentajeLiberado -->
                <ng-container matColumnDef="% Liberado">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Porcentaje liberado</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="leading-relaxed whitespace-nowrap">{{transaction.porcentajeLiberado}}</span>
                    </td>
                </ng-container>

                <!-- porcentajeFacturado -->
                <ng-container matColumnDef="% Facturado">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Porcentaje facturado</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="leading-relaxed whitespace-nowrap">{{transaction.porcentajeFacturado}}</span>
                    </td>
                </ng-container>

                <!-- porcentajePagado -->
                <ng-container matColumnDef="% Pagado">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Porcentaje pagado</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="leading-relaxed whitespace-nowrap">{{transaction.porcentajePagado}}</span>
                    </td>
                </ng-container>

                <!-- Ver la PO completa -->
                <ng-container matColumnDef="ver PO">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>ver PO</th>
                    <td mat-cell *matCellDef="let transaction">
                        <button mat-mini-fab color="primary" (click)="verPO(transaction.poId);">
                            <mat-icon svgIcon="mat_outline:remove_red_eye"></mat-icon>
                        </button>
                    </td>
                </ng-container>

                <!-- estado -->
                <ng-container matColumnDef="Estado">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
                    <td mat-cell *matCellDef="let transaction">
                        <span class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase" [ngClass]="{'bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50': transaction.estado === 'Finalizado',
                          'bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50 ': transaction.estado==='Por pagar',
                          'bg-orange-200 text-orange-800 dark:bg-orange-600 dark:text-orange-50 ': transaction.estado==='Liberado'}">
                          <span class="leading-relaxed whitespace-nowrap">{{transaction.estado}}</span>
                        </span>
                    </td>
                </ng-container>
                <!-- Footer -->
                <tr mat-header-row *matHeaderRowDef="recentTransactionsTableColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: recentTransactionsTableColumns;"></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No se reconocen registros con: <b>"{{input.value}}"</b></td>
                </tr>
            </table>

        </div>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Cantidad de elementos"> </mat-paginator>
        <div class="relative p-4">
            <button mat-flat-button class="bg-lime-400" (click)="exportAsXLSX()">
                <mat-icon svgIcon="mat_outline:sim_card_download"></mat-icon>
                Exportar datos</button>
        </div>
    </div>

    <!-- Right drawer must be positioned after the content-->

    <fuse-drawer [name]="'leftDrawer'" [opened]="drawerOpened" [position]="'right'" [mode]="'side'">
        <form class="flex flex-col mt-8 p-8 pb-4 bg-card rounded-2xl shadow overflow-hidden" [formGroup]="filterForm">
            <div class="flex">
                <mat-form-field [ngClass]="filterForm" class="flex-auto">
                    <mat-label>Búsqueda por valor de la PO</mat-label>
                    <input class="text-right" matInput [formControlName]="'valorPo'">
                    <span matPrefix>$</span>
                </mat-form-field>
            </div>
            <div class="flex">
                <mat-form-field [ngClass]="filterForm" class="flex-auto">
                    <mat-label>Búsqueda por porcentaje liberado</mat-label>
                    <input matInput [formControlName]="'porcentajeLiberado'" [placeholder]="'Ingresa los % de liberación'">
                    <mat-hint>porcentajeLiberado</mat-hint>
                </mat-form-field>
            </div>
            <div class="flex">
                <mat-form-field [ngClass]="filterForm" class="flex-auto">
                    <mat-label>Búsqueda por porcentaje pagado</mat-label>
                    <input matInput [formControlName]="'porcentajePagado'" [placeholder]="'Ingresa los % pagados'">
                    <mat-hint>porcentajePagado</mat-hint>
                </mat-form-field>
            </div>


            <button class="fuse-mat-button-large w-full mt-6" mat-flat-button [color]="'primary'">
                    <span> Buscar </span>
                </button>
        </form>
        <!-- <mat-accordion class="example-headers-align" multi>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Perfiles de visualizaciòn.
                    </mat-panel-title>
                    <mat-panel-description>

                    </mat-panel-description>
                </mat-expansion-panel-header>

                 <section class="example-section">
                    <label class="example-margin">Perfíl:</label>
                    <mat-radio-group>
                        <mat-radio-button class="example-margin" value="after" (change)="perfilesVisualizacion('value')">

                            Producción</mat-radio-button>
                        <mat-radio-button class="example-margin" value="before" (change)="cargueCompleto()">Completo</mat-radio-button>
                    </mat-radio-group>
                </section> 

            </mat-expansion-panel>
        </mat-accordion>-->
    </fuse-drawer>

</div>